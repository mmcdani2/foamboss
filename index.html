<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>FoamBoss â€” Spray Foam Calculator (Standalone v1.7.1a)</title>
  <style>
    :root {
      --bg:#fafbfe; --panel:#ffffff; --panel2:#f6f7fb; --border:#e1e6f0;
      --fg:#0b1220; --muted:#63708a; --brand:#caa24b; --brand-ink:#0b0f16;
      --radius:14px; --shadow: 0 6px 22px rgba(17, 24, 39, .08);
    }
    [data-theme="dark"]{
      --bg:#0a0b0f; --panel:#11131a; --panel2:#0e1017; --border:#1e2333;
      --fg:#f4f7fb; --muted:#aeb8cc; --brand:#d8b559; --brand-ink:#0d0f14;
      --shadow: 0 6px 24px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    html,body{margin:0;height:100%;background:var(--bg);color:var(--fg);
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, sans-serif}
    .container{max-width:1120px;margin:0 auto;padding:24px}
    .toolbar{display:flex;gap:12px;flex-wrap:wrap;align-items:center;justify-content:space-between;margin-bottom:16px}
    .brand{display:flex;align-items:center;gap:10px;font-weight:800;letter-spacing:.2px}
    .logo{width:32px;height:32px;border-radius:8px;object-fit:cover}
    .nav{display:flex;gap:8px;flex-wrap:wrap;align-items:center}
    .btn{background:var(--panel2);color:var(--fg);border:1px solid var(--border);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;transition:.18s all ease}
    .btn:hover{transform:translateY(-1px);box-shadow:var(--shadow)}
    .btn.primary{background:var(--brand);color:var(--brand-ink);border-color:#b8943b}
    .btn.danger{background:#fff0f0;border-color:#ffd6d6;color:#8b1d1d}
    [data-theme="dark"] .btn.danger{background:#1a1010;border-color:#3b1f1f;color:#fca5a5}
    .badge{padding:4px 10px;border-radius:999px;background:var(--panel2);border:1px solid var(--border);color:var(--muted);font-size:12px;margin-right:8px}

    .card{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);padding:18px;box-shadow:var(--shadow);margin-bottom:16px}

    .section-title{font-size:13px;color:var(--muted);margin:0 0 8px 2px;text-transform:uppercase;letter-spacing:.12em}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    @media (max-width: 980px){ .grid{grid-template-columns:repeat(6,1fr)} }
    @media (max-width: 620px){ .grid{grid-template-columns:repeat(2,1fr)} }
    .field{grid-column: span 4; display:flex; flex-direction:column; gap:6px}
    .span-3{grid-column:span 3}.span-4{grid-column:span 4}.span-6{grid-column:span 6}.span-8{grid-column:span 8}.span-12{grid-column:span 12}
    label{font-size:12px;color:var(--muted)}
    input, select, textarea{width:100%; min-height:44px; padding:10px 12px; border-radius:12px;border:1px solid var(--border); background:#fff; color:var(--fg);outline:none; transition:border-color .15s ease, box-shadow .15s ease}
    [data-theme="dark"] input, [data-theme="dark"] select, [data-theme="dark"] textarea{background:#0c0f16}
    input:focus, select:focus, textarea:focus{border-color:#9fb2da; box-shadow:0 0 0 3px rgba(159,178,218,.35)}
    textarea{min-height:60px; resize:vertical}
    table{width:100%;border-collapse:separate;border-spacing:0 8px}
    thead th{font-size:12px;color:var(--muted);text-align:left;padding:0 10px}
    tbody td{background:#fff;border:1px solid var(--border);padding:10px;border-left:none;border-right:none}
    [data-theme="dark"] tbody td{background:#0c0f16}
    tbody td:first-child{border-top-left-radius:12px;border-bottom-left-radius:12px;border-left:1px solid var(--border)}
    tbody td:last-child{border-top-right-radius:12px;border-bottom-right-radius:12px;border-right:1px solid var(--border)}
    .tar{text-align:right}
    .row-actions{display:flex;gap:8px;justify-content:flex-end}
    .muted{color:var(--muted)} .xsmall{font-size:12px}

    .sticky-footer{position:fixed; left:0; right:0; bottom:0; z-index:999; background:rgba(255,255,255,.92); backdrop-filter:saturate(1.1) blur(6px); border-top:1px solid var(--border); box-shadow:0 -4px 18px rgba(17,24,39,.08)}
    [data-theme="dark"] .sticky-footer{background:rgba(16,18,25,.92)}
    .sticky-inner{max-width:1120px;margin:0 auto;padding:10px 16px;display:flex;gap:12px;align-items:center;justify-content:space-between}
    .totals{display:flex;gap:16px;flex-wrap:wrap}
    .spacer{height:84px}

    .quote-table tbody td { background: var(--panel); }
    [data-theme="dark"] .quote-table tbody td { background: #0c0f16; }

    .pdf-light { --bg:#ffffff; --panel:#ffffff; --panel2:#f3f4f7; --border:#e1e6f0; --fg:#0b1220; --muted:#63708a; background:#fff; color:#0b1220; }
    .pdf-light .card{background:#fff; border-color:#e1e6f0; box-shadow:none}

    @media print{ .toolbar, .sticky-footer{display:none!important} body{background:#fff} .card{box-shadow:none;border-color:#ddd} .container{max-width:900px}}
  </style>
</head>
<body>
  <div class="container"><div id="app"></div></div>
  <script>
    window.addEventListener('error', function(e){
      var pre=document.createElement('pre');
      pre.style.cssText='white-space:pre-wrap;background:#fee;border:1px solid #fbb;color:#900;padding:8px;border-radius:8px';
      pre.textContent='Script error: ' + (e.message || e.error);
      document.body.prepend(pre);
    });
    (function(){ 
      const saved = localStorage.getItem('fb_theme'); 
      if(saved) document.documentElement.setAttribute('data-theme', saved) 
    })();
  </script>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>

  <script type="text/babel">
    const { useState, useMemo, useEffect, useRef } = React

    const defaultSettings = {
      companyName: 'FoamBoss Insulation',
      companyPhone: '(555) 555-5555',
      companyEmail: 'bids@foamboss.com',
      companyAddress: '123 Foam St, Anywhere, USA',
      logoDataUrl: '',
      OC_Yield_BF_per_Set: 16000, CC_Yield_BF_per_Set: 4500,
      OC_Cost_per_Set: 2450, CC_Cost_per_Set: 1450,
      laborRatePerHour: 65, Productivity_BF_per_Hr_OC: 450, Productivity_BF_per_Hr_CC: 250,
      wastePctDefault: 0.07, overheadMode: 'Percent', overheadPct: 0.12,
      pricingMode: 'Margin', targetGrossMarginPct: 0.5, markupPct: 0.3,
      roundingSets: 0.25, minChargeGlobal: 350, R_per_in_OC: 3.7, R_per_in_CC: 6.5,
      brandColor: '#caa24b',
      scopeOfWork: '',
      travelZones: [
        { id:'tz0', name:'In Town', amount:0 },
        { id:'tz1', name:'Zone 1', amount:75 },
        { id:'tz2', name:'Zone 2', amount:125 },
        { id:'tz3', name:'Zone 3', amount:200 },
      ],
      showProfit: true,
      taxMaterialsOnly: false,
    }
    const pitchOptions = ["3:12","4:12","5:12","6:12","7:12","8:12","9:12","10:12","12:12"]
    const pitchFactors = {"3:12":1.031,"4:12":1.054,"5:12":1.083,"6:12":1.118,"7:12":1.158,"8:12":1.202,"9:12":1.25,"10:12":1.302,"12:12":1.414}
    const parsePitchToFactor = p => ((p||'').match(/(\d+)\s*:\s*(\d+)/)||[]).slice(1).map(Number).reduce((acc,v,i,arr)=> i? Math.sqrt(1+Math.pow(arr[0]/v,2)):acc,1) || 1
    const getPitchFactor = p => pitchFactors[p] ?? parsePitchToFactor(p)
    const rPerIn = (mat,s)=> mat==='OC' ? s.R_per_in_OC : s.R_per_in_CC
    const thicknessFromR = (r,mat,s)=>{const rpi=rPerIn(mat,s);return rpi>0?r/rpi:0}
    const ceilTo = (v,step)=> step<=0? Math.ceil(v): Math.ceil(v/step)*step

    function sumOpenings(openings){ return (openings||[]).reduce((a,o)=> a + (Number(o.L)||0) * (Number(o.W)||0), 0) }

    function areaFromGeometry(a){
      const t = a.areaName
      if(t==='Walls' || t==='Garage Walls' || t==='Metal Walls') return (a.LF_total||0)*(a.H_ft||0)
      if(t==='Rim Joist') return (a.LF_total||0)*(a.H_ft||1)
      if(t==='Attic Floor' || t==='Subfloor' || t==='Garage Ceiling') return (a.L_ft||0)*(a.W_ft||0)
      if(t==='Roof Deck' || t==='Metal Roof') return (a.L_ft||0)*(a.W_ft||0) * (a.pitch? getPitchFactor(a.pitch):1)
      if(t==='Vaulted') return (a.L_ft||0)*(((a.H_low||0)+(a.H_high||0))/2)
      if(t==='Pole Barn'){
        const perim = 2*((a.L_ft||0)+(a.W_ft||0))
        const avgH = ((a.H_eave||0)+(a.H_peak||0))/2
        return perim*avgH
      }
      return (a.L_ft||0)*(a.W_ft||0)
    }

    function calcLine(a,s){
      const grossAreaSqft = areaFromGeometry(a)
      const openingsPct=a.openingsMode==='Percent'?(a.openingsPct||0):0
      const openingsArea=a.openingsMode==='Dimensions'? sumOpenings(a.openings||[]) : 0
      const baseArea=Math.max(grossAreaSqft - openingsArea,0)
      const adjAreaSqft=baseArea*(1-openingsPct)

      const thickness_in=a.thickness_in ?? (a.rTarget? thicknessFromR(a.rTarget,a.material,s):0)
      const boardFeet=adjAreaSqft*thickness_in
      const wastePct=a.wastePctOverride ?? s.wastePctDefault
      const bfWaste=boardFeet*(1+wastePct)

      const yieldPerSet=a.material==='OC'?s.OC_Yield_BF_per_Set:s.CC_Yield_BF_per_Set
      const setsRequired= yieldPerSet>0 ? (bfWaste/yieldPerSet):0
      const setsBilled=ceilTo(setsRequired,s.roundingSets)
      const setCost=a.material==='OC'?s.OC_Cost_per_Set:s.CC_Cost_per_Set
      const materialCost=setsBilled*setCost

      const prod=a.material==='OC'?s.Productivity_BF_per_Hr_OC:s.Productivity_BF_per_Hr_CC
      const laborHours=prod>0?(bfWaste/prod):0
      const laborCost=laborHours*s.laborRatePerHour

      const overhead=s.overheadMode==='Percent'?(materialCost+laborCost)*s.overheadPct:0
      const subtotal=Math.max(materialCost+laborCost+overhead,s.minChargeGlobal)
      const sell=s.pricingMode==='Margin'?((1-s.targetGrossMarginPct)===0?0:subtotal/(1-s.targetGrossMarginPct)):(subtotal*(1+s.markupPct))
      return {adjAreaSqft, setsBilled, sell, laborHours, materialCost, laborCost, overhead, boardFeet}
    }

    function useCalculator(){
      const [settings,setSettings]=useState(defaultSettings)
      const [assemblies,setAssemblies]=useState([])
      const [fees,setFees]=useState({travelZoneId:'tz0', fuelSurchargeOn:false, custom:[], customTravel:null})
      const [taxRate,setTaxRate]=useState(0.0825)
      const [packages,setPackages]=useState([
        { key:'all', name:'All', ids: new Set() },
        { key:'good', name:'Good', ids: new Set() },
        { key:'better', name:'Better', ids: new Set() },
        { key:'best', name:'Best', ids: new Set() },
      ])
      const lines=useMemo(()=>assemblies.map(a=>calcLine(a,settings)),[assemblies,settings])
      const sub=useMemo(()=>lines.reduce((a,c)=>a+c.sell,0),[lines])
      const currentZone = settings.travelZones.find(z=>z.id===fees.travelZoneId)
      const travelFee = (fees.travelZoneId==='custom' ? (Number(fees.customTravel)||0) : (currentZone? currentZone.amount : 0))
      const fuel=fees.fuelSurchargeOn?25:0
      const custom=(fees.custom||[]).reduce((a,c)=>a+(Number(c.value)||0),0)
      const feesTotal=travelFee+fuel+custom
      const taxableBase = settings.taxMaterialsOnly
        ? lines.reduce((a,c)=>a + c.materialCost, 0) + feesTotal
        : sub + feesTotal
      const tax=taxRate * taxableBase
      const total=sub+feesTotal+tax
      const laborHours = lines.reduce((a,c)=>a+c.laborHours,0)
      const costTotal = lines.reduce((a,c)=>a + c.materialCost + c.laborCost + c.overhead, 0)
      const profit = sub - costTotal
      const profitPct = sub>0 ? (profit/sub) : 0
      const crewSize = laborHours>8 ? '2-person crew' : '1-person crew'
      const effRate = laborHours>0 ? (sub/laborHours) : 0
      const breakeven = costTotal

      useEffect(()=>{
        setPackages(pkgs=> pkgs.map(p=> p.key==='all' ? {...p, ids: new Set(assemblies.map(a=>a.id))} : p ))
      }, [assemblies.length])

      return { settings,setSettings,assemblies,setAssemblies,fees,setFees,taxRate,setTaxRate,lines,sub,travelFee,fuel,feesTotal,tax,total,laborHours,profit,profitPct,crewSize,effRate,breakeven,packages,setPackages }
    }

    function ThemeToggle(){
      const [theme,setTheme]=useState(document.documentElement.getAttribute('data-theme')||'light')
      function toggle(){ const next=theme==='dark'?'light':'dark'; setTheme(next); document.documentElement.setAttribute('data-theme',next); localStorage.setItem('fb_theme',next) }
      return <button className="btn" onClick={toggle}>{theme==='dark'?'ðŸŒž Light':'ðŸŒ™ Dark'} Mode</button>
    }

    function App(){
      const calc=useCalculator()
      const [tab,setTab]=useState('wizard')
      return (<>
        <div className="toolbar">
          <div className="brand">
            {calc.settings.logoDataUrl
              ? <img className="logo" src={calc.settings.logoDataUrl} alt="logo"/>
              : <svg className="logo" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><defs><linearGradient id="g" x1="0" x2="1"><stop offset="0" stopColor="#f6d676"/><stop offset="1" stopColor="#caa24b"/></linearGradient></defs><circle cx="32" cy="32" r="30" fill="url(#g)" stroke="#b8943b" strokeWidth="2"/><path d="M18 38l8-18h4l-8 18h-4zm14 0l8-18h4l-8 18h-4z" fill="#0b0f16"/></svg>
            }
            <span>{calc.settings.companyName}</span>
            <span className="muted xsmall">v1.7.1a</span>
          </div>
          <div className="nav">
            <button className={"btn " + (tab==='wizard'?'primary':'')} onClick={()=>setTab('wizard')}>Wizard</button>
            <button className={"btn " + (tab==='packages'?'primary':'')} onClick={()=>setTab('packages')}>Packages</button>
            <button className={"btn " + (tab==='preview'?'primary':'')} onClick={()=>setTab('preview')}>Estimate</button>
            <button className={"btn " + (tab==='settings'?'primary':'')} onClick={()=>setTab('settings')}>Admin</button>
            <ThemeToggle/>
          </div>
        </div>
        {tab==='wizard' && <Wizard calc={calc}/>}
        {tab==='packages' && <Packages calc={calc}/>}
        {tab==='preview' && <QuotePreview calc={calc}/>}
        {tab==='settings' && <AdminSettings calc={calc}/>}

        <div className="sticky-footer"><div className="sticky-inner">
          <div className="totals">
            <span>Sell: <b>${calc.total.toFixed(2)}</b></span>
            {calc.settings.showProfit && (<>
              <span>Profit: <b>${calc.profit.toFixed(2)} ({(calc.profitPct*100).toFixed(1)}%)</b></span>
              <span>Crew Hrs: <b>{calc.laborHours.toFixed(1)}</b></span>
              <span>Rec Crew: <b>{calc.crewSize}</b></span>
              <span>Eff Rate: <b>${calc.effRate.toFixed(0)}/hr</b></span>
              <span>Breakeven: <b>${calc.breakeven.toFixed(2)}</b></span>
            </>)}
          </div>
          <button className="btn primary" id="stickyAdd">{'Add Assembly'}</button>
        </div></div>
        <div className="spacer"></div>
      </>)
    }
    function Wizard({calc}){
      const [form,setForm]=useState({
        label:'Exterior Walls', areaName:'Walls',
        LF_total:160, L_ft:40, W_ft:30, H_ft:8,
        H_low:8, H_high:16, H_eave:10, H_peak:16,
        pitch:'9:12', pitchMode:'pick', pitchCustom:'',
        material:'OC', thickness_in:6, rTarget:'',
        openingsMode:'Percent', openingsPct:0.05, openings:[],
        notes:''
      })

      const isWalls = form.areaName==='Walls' || form.areaName==='Garage Walls' || form.areaName==='Metal Walls' || form.areaName==='Rim Joist'
      const isRect  = form.areaName==='Attic Floor' || form.areaName==='Subfloor' || form.areaName==='Garage Ceiling' || form.areaName==='Roof Deck' || form.areaName==='Metal Roof' || form.areaName==='Pole Barn' || form.areaName==='Vaulted'
      const needsPitch = form.areaName==='Roof Deck' || form.areaName==='Metal Roof'
      const isVaulted = form.areaName==='Vaulted'
      const isPoleBarn = form.areaName==='Pole Barn'

      function addAssembly(){
        const pitchVal = needsPitch ? (form.pitchMode==='pick'? form.pitch : form.pitchCustom) : undefined
        const a = {
          id: Math.random().toString(36).slice(2,9),
          label: form.label || form.areaName,
          areaName: form.areaName,
          LF_total: isWalls ? Number(form.LF_total||0) : undefined,
          L_ft: isRect ? Number(form.L_ft||0) : undefined,
          W_ft: isRect ? Number(form.W_ft||0) : undefined,
          H_ft: isWalls ? Number(form.H_ft || (form.areaName==='Rim Joist'?1:0)) : undefined,
          H_low: isVaulted ? Number(form.H_low||0) : undefined,
          H_high: isVaulted ? Number(form.H_high||0) : undefined,
          H_eave: isPoleBarn ? Number(form.H_eave||0) : undefined,
          H_peak: isPoleBarn ? Number(form.H_peak||0) : undefined,
          pitch: pitchVal,
          material: form.material,
          thickness_in: form.thickness_in ? Number(form.thickness_in) : undefined,
          rTarget: form.rTarget ? Number(form.rTarget) : undefined,
          openingsMode: form.openingsMode,
          openingsPct: form.openingsMode==='Percent' ? Number(form.openingsPct||0) : 0,
          openings: form.openings || [],
          notes: form.notes || ''
        }
        calc.setAssemblies([...calc.assemblies,a])
        setForm({...form, notes:''})
      }

      // Wire sticky footer button to same handler
      useEffect(()=>{
        const btn = document.getElementById('stickyAdd')
        if(!btn) return
        const h = ()=>addAssembly()
        btn.addEventListener('click', h)
        return ()=>btn.removeEventListener('click', h)
      })

      // Openings helpers
      function addOpening(){ setForm({...form, openings:[...(form.openings||[]), {id:Math.random().toString(36).slice(2,8), L:'', W:''}]}) }
      function updateOpening(id,key,val){ setForm({...form, openings:(form.openings||[]).map(o=>o.id===id? {...o, [key]:val}:o)}) }
      function removeOpening(id){ setForm({...form, openings:(form.openings||[]).filter(o=>o.id!==id)}) }
      const openingsTotal = (form.openings||[]).reduce((a,o)=> a + (Number(o.L)||0)*(Number(o.W)||0), 0)

      return (
        <div className="card">
          <h3 style={{marginTop:0}}>Wizard</h3>

          <div className="section-title">Area & Geometry</div>
          <div className="card" style={{padding:'14px'}}>
            <div className="grid">
              <div className="field span-6">
                <label>What are we spraying?</label>
                <select value={form.areaName} onChange={e=>setForm({...form,areaName:e.target.value})}>
                  <option>Walls</option><option>Attic Floor</option><option>Roof Deck</option><option>Vaulted</option>
                  <option>Subfloor</option><option>Garage Walls</option><option>Garage Ceiling</option><option>Rim Joist</option>
                  <option>Metal Roof</option><option>Metal Walls</option><option>Pole Barn</option>
                </select>
              </div>
              <div className="field span-6">
                <label>Assembly Name</label>
                <input value={form.label} onChange={e=>setForm({...form,label:e.target.value})}/>
              </div>

              {isWalls && (<>
                <div className="field span-6">
                  <label>Total Wall Length (LF)</label>
                  <input type="number" value={form.LF_total} onChange={e=>setForm({...form,LF_total:e.target.value})}/>
                </div>
                <div className="field span-6">
                  <label>{form.areaName==='Rim Joist'?'Height (ft, default 1)':'Wall Height (ft)'}</label>
                  <input type="number" value={form.H_ft} onChange={e=>setForm({...form,H_ft:e.target.value})}/>
                </div>
              </>)}

              {isRect && !isWalls && !isVaulted && !isPoleBarn && (<>
                <div className="field span-6"><label>Length (ft)</label><input type="number" value={form.L_ft} onChange={e=>setForm({...form,L_ft:e.target.value})}/></div>
                <div className="field span-6"><label>Width (ft)</label><input type="number" value={form.W_ft} onChange={e=>setForm({...form,W_ft:e.target.value})}/></div>
              </>)}

              {isVaulted && (<>
                <div className="field span-4"><label>Wall Length (ft)</label><input type="number" value={form.L_ft} onChange={e=>setForm({...form,L_ft:e.target.value})}/></div>
                <div className="field span-4"><label>Low height (ft)</label><input type="number" value={form.H_low} onChange={e=>setForm({...form,H_low:e.target.value})}/></div>
                <div className="field span-4"><label>High height (ft)</label><input type="number" value={form.H_high} onChange={e=>setForm({...form,H_high:e.target.value})}/></div>
              </>)}

              {isPoleBarn && (<>
                <div className="field span-3"><label>Length (ft)</label><input type="number" value={form.L_ft} onChange={e=>setForm({...form,L_ft:e.target.value})}/></div>
                <div className="field span-3"><label>Width (ft) (gable)</label><input type="number" value={form.W_ft} onChange={e=>setForm({...form,W_ft:e.target.value})}/></div>
                <div className="field span-3"><label>Height to Eave (ft)</label><input type="number" value={form.H_eave} onChange={e=>setForm({...form,H_eave:e.target.value})}/></div>
                <div className="field span-3"><label>Height to Peak (ft)</label><input type="number" value={form.H_peak} onChange={e=>setForm({...form,H_peak:e.target.value})}/></div>
              </>)}

              {needsPitch && (<>
                <div className="field span-4">
                  <label>Pitch Mode</label>
                  <select value={form.pitchMode} onChange={e=>setForm({...form,pitchMode:e.target.value})}>
                    <option value="pick">Dropdown</option>
                    <option value="manual">Manual</option>
                  </select>
                </div>
                {form.pitchMode==='pick'
                  ? <div className="field span-4"><label>Pitch (rise:run)</label><select value={form.pitch} onChange={e=>setForm({...form,pitch:e.target.value})}>{pitchOptions.map(p=><option key={p}>{p}</option>)}</select></div>
                  : <div className="field span-4"><label>Pitch (rise:run)</label><input value={form.pitchCustom} onChange={e=>setForm({...form,pitchCustom:e.target.value})} placeholder="e.g. 7:12"/></div>}
              </>)}
            </div>
          </div>

          <div className="section-title" style={{marginTop:12}}>Material & Thickness</div>
          <div className="card" style={{padding:'14px'}}>
            <div className="grid">
              <div className="field span-4"><label>Material</label>
                <select value={form.material} onChange={e=>setForm({...form,material:e.target.value})}>
                  <option>OC</option><option>CC</option><option>Hybrid</option><option>Airkrete</option>
                  <option>Cellulose</option><option>Fiberglass</option><option>Batts</option><option>Rockwool</option>
                  <option>Ignition Barrier</option><option>Thermal Barrier</option><option>Elastomeric Coating</option>
                </select>
              </div>
              <div className="field span-4"><label>Thickness (in)</label><input type="number" value={form.thickness_in} onChange={e=>setForm({...form,thickness_in:e.target.value})}/></div>
              <div className="field span-4"><label>Target R (auto; override allowed)</label><input type="number" value={form.rTarget} onChange={e=>setForm({...form,rTarget:e.target.value})}/></div>
            </div>
          </div>

          <div className="section-title" style={{marginTop:12}}>Openings</div>
          <div className="card" style={{padding:'14px'}}>
            <div className="grid">
              <div className="field span-6"><label>Openings Mode</label>
                <select value={form.openingsMode} onChange={e=>setForm({...form,openingsMode:e.target.value})}>
                  <option>Percent</option><option>Dimensions</option>
                </select>
              </div>
              {form.openingsMode==='Percent' ? (
                <div className="field span-6"><label>Openings % (0-1)</label><input type="number" step="0.01" value={form.openingsPct} onChange={e=>setForm({...form,openingsPct:e.target.value})}/></div>
              ) : (
                <div className="span-12">
                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', marginBottom:'6px'}}>
                    <div className="muted xsmall">Add each opening (LÃ—W). Running total: <b>{openingsTotal.toFixed(1)} sqft</b></div>
                    <button className="btn" onClick={addOpening} type="button">Add Opening</button>
                  </div>
                  {(form.openings||[]).length===0 && <div className="muted xsmall">No openings yet.</div>}
                  {(form.openings||[]).map(o=> (
                    <div key={o.id} className="grid" style={{marginBottom:'6px'}}>
                      <div className="field span-3"><label>L (ft)</label><input type="number" value={o.L} onChange={e=>updateOpening(o.id,'L',e.target.value)}/></div>
                      <div className="field span-3"><label>W (ft)</label><input type="number" value={o.W} onChange={e=>updateOpening(o.id,'W',e.target.value)}/></div>
                      <div className="field span-6" style={{display:'flex',alignItems:'flex-end',gap:'8px'}}>
                        <div className="xsmall muted">Area: {(((Number(o.L)||0)*(Number(o.W)||0))).toFixed(1)} sqft</div>
                        <button className="btn danger" type="button" onClick={()=>removeOpening(o.id)}>Remove</button>
                      </div>
                    </div>
                  ))}
                </div>
              )}
            </div>
          </div>

          <div className="section-title" style={{marginTop:12}}>Fees & Tax</div>
          <div className="card" style={{padding:'14px'}}>
            <div className="grid">
              <div className="field span-4">
                <label>Travel Zone</label>
                <select value={calc.fees.travelZoneId} onChange={e=>calc.setFees({...calc.fees, travelZoneId:e.target.value})}>
                  {calc.settings.travelZones.map(z=> <option key={z.id} value={z.id}>{z.name} (${z.amount})</option>)}
                  <option value="custom">Customâ€¦</option>
                </select>
              </div>
              {calc.fees.travelZoneId==='custom' && (
                <div className="field span-4"><label>Custom Travel ($)</label><input type="number" value={calc.fees.customTravel||''} onChange={e=>calc.setFees({...calc.fees, customTravel:e.target.value})}/></div>
              )}
              
              <div className="field span-4">
                <label>Tax Rate (0-1)</label>
                <input type="number" step="0.0001" value={calc.taxRate} onChange={e=>calc.setTaxRate(Number(e.target.value)||0)}/>
              </div>
              <div className="field span-4">
                <label>Tax Applies To</label>
                <select value={calc.settings.taxMaterialsOnly?'materials':'total'} onChange={e=>calc.setSettings({...calc.settings, taxMaterialsOnly: e.target.value==='materials'})}>
                  <option value="total">Total Job</option>
                  <option value="materials">Materials Only</option>
                </select>
              </div>
            </div>
            <p className="muted xsmall">Totals update live below and in Estimate.</p>
          </div>

          <div className="section-title" style={{marginTop:12}}>Notes</div>
          <div className="card" style={{padding:'14px'}}>
            <div className="grid">
              <div className="field span-12">
                <textarea value={form.notes} onChange={e=>setForm({...form,notes:e.target.value})} placeholder="Optional notes (access, substrate, safety)"></textarea>
              </div>
            </div>
          </div>

          <h3 style={{marginTop:18}}>Current Assemblies</h3>
          <table>
            <thead>
              <tr><th>Label</th><th>Area</th><th>Material</th><th>Size</th><th>Pitch</th><th>Adj Area</th><th>Kits</th><th className="tar">Sell</th><th></th></tr>
            </thead>
            <tbody>
              {calc.assemblies.map((a,i)=>{
                const r = calc.lines[i]
                return (
                  <tr key={a.id}>
                    <td>{a.label||'-'}</td>
                    <td>{a.areaName}</td>
                    <td>{a.material}</td>
                    <td>{
                      (a.areaName==='Walls'||a.areaName==='Garage Walls'||a.areaName==='Metal Walls'||a.areaName==='Rim Joist')
                        ? `${a.LF_total||0} LF Ã— ${a.H_ft|| (a.areaName==='Rim Joist'?1:0)} ft`
                        : (a.areaName==='Vaulted')
                          ? `${a.L_ft||0} ft Ã— avg ${(((a.H_low||0)+(a.H_high||0))/2).toFixed(1)} ft`
                          : (a.areaName==='Pole Barn')
                            ? `${a.L_ft||0}Ã—${a.W_ft||0} perim @ avg ${(((a.H_eave||0)+(a.H_peak||0))/2).toFixed(1)} ft`
                            : `${a.L_ft||0} Ã— ${a.W_ft||0}`
                    }</td>
                    <td>{(a.areaName==='Roof Deck'||a.areaName==='Metal Roof')?(a.pitch||'-'):'-'}</td>
                    <td>{r.adjAreaSqft.toFixed(1)} sqft</td>
                    <td>{r.setsBilled.toFixed(2)}</td>
                    <td className="tar">${r.sell.toFixed(2)}</td>
                    <td className="row-actions">
                      <InlineEdit
                        a={a}
                        onSave={(updated)=>{calc.setAssemblies(calc.assemblies.map(x=>x.id===a.id?{...x,...updated}:x))}}
                        onRemove={()=>calc.setAssemblies(calc.assemblies.filter(x=>x.id!==a.id))}
                      />
                    </td>
                  </tr>
                )
              })}
            </tbody>
          </table>
        </div>
      )
    }

    function InlineEdit({a,onSave,onRemove}){
      const [open,setOpen]=useState(false)
      const [state,setState]=useState({...a})
      useEffect(()=>setState({...a}),[a.id])

      function addOpening(){ const openings=[...(state.openings||[]), {id:Math.random().toString(36).slice(2,8), L:'', W:''}]; setState({...state, openings}) }
      function updateOpening(id,key,val){ setState({...state, openings:(state.openings||[]).map(o=>o.id===id? {...o, [key]:val}:o)}) }
      function removeOpening(id){ setState({...state, openings:(state.openings||[]).filter(o=>o.id!==id)}) }
      const openingsTotal = (state.openings||[]).reduce((a,o)=> a + (Number(o.L)||0)*(Number(o.W)||0), 0)

      return (
        <div>
          {!open ? (
            <div style={{display:'flex',gap:8}}>
              <button className="btn" onClick={()=>setOpen(true)}>Edit</button>
              <button className="btn danger" onClick={onRemove}>Remove</button>
            </div>
          ) : (
            <div className="card" style={{padding:'10px', minWidth:'560px'}}>
              <div className="grid">
                <div className="field span-4"><label>Label</label><input value={state.label||''} onChange={e=>setState({...state,label:e.target.value})}/></div>
                <div className="field span-4"><label>Material</label><select value={state.material} onChange={e=>setState({...state,material:e.target.value})}><option>OC</option><option>CC</option></select></div>
                <div className="field span-4"><label>Thickness (in)</label><input type="number" value={state.thickness_in||''} onChange={e=>setState({...state,thickness_in:Number(e.target.value)||undefined})}/></div>
                <div className="field span-4"><label>Target R</label><input type="number" value={state.rTarget||''} onChange={e=>setState({...state,rTarget:Number(e.target.value)||undefined})}/></div>
                <div className="field span-4"><label>Openings Mode</label><select value={state.openingsMode} onChange={e=>setState({...state,openingsMode:e.target.value})}><option>Percent</option><option>Dimensions</option></select></div>
                <div className="field span-4"><label>Openings % (0-1)</label><input type="number" step="0.01" value={state.openingsPct||0} onChange={e=>setState({...state,openingsPct:Number(e.target.value)||0})}/></div>

                <div className="span-12">
                  <div style={{display:'flex', justifyContent:'space-between', alignItems:'center', margin:'6px 0'}}>
                    <div className="muted xsmall">Openings total: <b>{openingsTotal.toFixed(1)} sqft</b></div>
                    <button className="btn" type="button" onClick={addOpening}>Add Opening</button>
                  </div>
                  {(state.openings||[]).map(o=> (
                    <div key={o.id} className="grid" style={{marginBottom:'6px'}}>
                      <div className="field span-3"><label>L (ft)</label><input type="number" value={o.L} onChange={e=>setState({...state, openings:(state.openings||[]).map(x=>x.id===o.id? {...x, L:e.target.value}:x)})}/></div>
                      <div className="field span-3"><label>W (ft)</label><input type="number" value={o.W} onChange={e=>setState({...state, openings:(state.openings||[]).map(x=>x.id===o.id? {...x, W:e.target.value}:x)})}/></div>
                      <div className="field span-6" style={{display:'flex',alignItems:'flex-end',gap:'8px'}}>
                        <div className="xsmall muted">Area: {(((Number(o.L)||0)*(Number(o.W)||0))).toFixed(1)} sqft</div>
                        <button className="btn danger" type="button" onClick={()=>removeOpening(o.id)}>Remove</button>
                      </div>
                    </div>
                  ))}
                </div>

                <div className="field span-12"><label>Notes</label><textarea value={state.notes||''} onChange={e=>setState({...state,notes:e.target.value})}></textarea></div>
              </div>
              <div className="tar" style={{display:'flex',gap:8,justifyContent:'flex-end'}}>
                <button className="btn" onClick={()=>setOpen(false)}>Cancel</button>
                <button className="btn primary" onClick={()=>{onSave(state);setOpen(false)}}>Save</button>
              </div>
            </div>
          )}
        </div>
      )
    }
    function Packages({calc}){
      function toggle(pIndex, id){
        calc.setPackages(pkgs=>{
          const copy = pkgs.map(p=>({...p, ids:new Set(p.ids)}))
          const set = copy[pIndex].ids
          set.has(id) ? set.delete(id) : set.add(id)
          return copy
        })
      }
      function selectAll(pIndex, all=true){
        calc.setPackages(pkgs=>{
          const copy = pkgs.map(p=>({...p, ids:new Set(p.ids)}))
          copy[pIndex].ids = new Set(all ? calc.assemblies.map(a=>a.id) : [])
          return copy
        })
      }
      function rename(pIndex, name){
        calc.setPackages(pkgs=> pkgs.map((p,i)=> i===pIndex? {...p, name} : p))
      }
      function pkgTotal(p){
        let t=0
        p.ids.forEach(id=>{
          const i = calc.assemblies.findIndex(a=>a.id===id)
          if(i>-1) t += calc.lines[i].sell
        })
        return t
      }

      return (
        <div className="card">
          <h3>Packages & Configurator</h3>
          <p className="muted">Pick which assemblies belong in each package.</p>

          <div className="grid">
            {calc.packages.filter(p=>p.key!=='all').map((p,idx)=>(
              <div key={p.key} className="span-4">
                <div className="card">
                  <div className="field"><label>Package Name</label><input value={p.name} onChange={e=>rename(idx+1,e.target.value)}/></div>
                  <table>
                    <thead><tr><th>Include</th><th>Assembly</th><th className="tar">Price</th></tr></thead>
                    <tbody>
                      {calc.assemblies.length===0 ? (
                        <tr><td colSpan="3" className="muted">No assemblies yet.</td></tr>
                      ) : calc.assemblies.map((a,i)=>{
                          const checked = calc.packages[idx+1].ids.has(a.id)
                          return (
                            <tr key={a.id}>
                              <td><input type="checkbox" checked={checked} onChange={()=>toggle(idx+1,a.id)}/></td>
                              <td>{a.label||a.areaName}</td>
                              <td className="tar">${calc.lines[i].sell.toFixed(2)}</td>
                            </tr>
                          )
                        })}
                      <tr><td></td><td><b>Subtotal</b></td><td className="tar"><b>${pkgTotal(calc.packages[idx+1]).toFixed(2)}</b></td></tr>
                    </tbody>
                  </table>
                  <div style={{display:'flex',gap:8,marginTop:8}}>
                    <button className="btn" onClick={()=>selectAll(idx+1,true)}>Select All</button>
                    <button className="btn" onClick={()=>selectAll(idx+1,false)}>None</button>
                  </div>
                </div>
              </div>
            ))}
          </div>

          <p className="muted xsmall">Package totals are assembly-only (no travel/tax).</p>
        </div>
      )
    }

    function QuotePreview({calc}){
      const pdfRef = useRef(null)
      const [activePkgKey,setActivePkgKey] = useState('all')

      function exportPDF(){
        const prev = document.documentElement.getAttribute('data-theme')
        document.documentElement.setAttribute('data-theme','light')
        pdfRef.current.classList.add('pdf-light')
        html2pdf()
          .set({
            margin:[10,10,10,10],
            filename:'FoamBoss_Quote.pdf',
            image:{type:'jpeg',quality:0.98},
            html2canvas:{scale:2,useCORS:true},
            jsPDF:{unit:'mm',format:'letter',orientation:'portrait'}
          })
          .from(pdfRef.current)
          .save()
          .then(()=>{
            if(prev) document.documentElement.setAttribute('data-theme', prev)
            else document.documentElement.removeAttribute('data-theme')
            pdfRef.current.classList.remove('pdf-light')
          })
      }
      function emailQuote(){
        const subject = encodeURIComponent('Your Spray Foam Estimate')
        const body = encodeURIComponent('Hi there,%0D%0A%0D%0AAttached is your FoamBoss estimate. Please review and let us know if you have any questions.%0D%0A%0D%0AThanks!')
        window.location.href = `mailto:?subject=${subject}&body=${body}`
      }

      const packageByKey = calc.packages.find(p=>p.key===activePkgKey) || calc.packages[0]
      const ids = packageByKey.key==='all' ? new Set(calc.assemblies.map(a=>a.id)) : packageByKey.ids
      const rows = calc.assemblies.map((a,i)=>({a, i, line:calc.lines[i]})).filter(r=>ids.has(r.a.id))

      return (
        <div className="card">
          <div style={{display:'flex',justifyContent:'space-between',alignItems:'center',gap:'8px'}}>
            <div style={{display:'flex',gap:'8px',flexWrap:'wrap'}}>
              {calc.packages.map(p=> (
                <button key={p.key} className={'btn '+(activePkgKey===p.key?'primary':'')} onClick={()=>setActivePkgKey(p.key)}>{p.name}</button>
              ))}
            </div>
            <div style={{display:'flex',gap:'8px'}}>
              <button className="btn" onClick={()=>window.print()}>Print</button>
              <button className="btn primary" onClick={exportPDF}>Generate PDF</button>
              <button className="btn" onClick={emailQuote}>Email Quote</button>
            </div>
          </div>

          <div ref={pdfRef}>
            <div className="card" style={{margin:'8px 0', padding:'16px', borderColor:'#e6d6a4'}}>
              <div style={{display:'flex', alignItems:'center', gap:'12px'}}>
                {calc.settings.logoDataUrl
                  ? <img className="logo" src={calc.settings.logoDataUrl} alt="logo"/>
                  : <svg width="36" height="36" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg">
                      <defs><linearGradient id="g2" x1="0" x2="1"><stop offset="0" stopColor="#f6d676"/><stop offset="1" stopColor="#caa24b"/></linearGradient></defs>
                      <circle cx="32" cy="32" r="30" fill="url(#g2)" stroke="#b8943b" strokeWidth="2"/>
                      <path d="M18 38l8-18h4l-8 18h-4zm14 0l8-18h4l-8 18h-4z" fill="#0b0f16"/>
                    </svg>}
                <div>
                  <h2 style={{margin:'0 0 2px'}}>Estimate</h2>
                  <div className="muted">{calc.settings.companyName} â€¢ {calc.settings.companyPhone} â€¢ {calc.settings.companyEmail}</div>
                  <div className="muted">{calc.settings.companyAddress}</div>
                </div>
              </div>
            </div>

            {calc.settings.scopeOfWork && (
              <div className="card" style={{marginTop:'8px'}}>
                <h3>Scope of Work</h3>
                <p style={{whiteSpace:'pre-wrap'}}>{calc.settings.scopeOfWork}</p>
              </div>
            )}

            <h3>Scope & Pricing â€” {packageByKey.name}</h3>
            <table className="quote-table">
              <thead><tr><th>Label</th><th>Area</th><th>Material</th><th>Specs</th><th>Kits</th><th className="tar">Price</th></tr></thead>
              <tbody>
                {rows.length===0 ? (
                  <tr><td colSpan="6" className="muted">No assemblies selected for this package.</td></tr>
                ) : rows.map(({a,i,line})=> (
                  <tr key={a.id}>
                    <td>{a.label||'-'}</td>
                    <td>{a.areaName}</td>
                    <td>{a.material}</td>
                    <td>{a.thickness_in? a.thickness_in+'"' : (a.rTarget? 'R'+a.rTarget : '-')}</td>
                    <td>{line.setsBilled.toFixed(2)}</td>
                    <td className="tar">${line.sell.toFixed(2)}</td>
                  </tr>
                ))}
              </tbody>
            </table>

            <div className="card" style={{ padding: '12px 16px', marginTop: '8px' }}>
              <div className="tar" style={{ display: 'flex', flexDirection: 'column', alignItems: 'flex-end', gap: '6px' }}>
                <div><span className="muted">Assemblies Subtotal:</span> <b>${calc.sub.toFixed(2)}</b></div>
                <div><span className="muted">Fees (Travel+Fuel+Custom):</span> <b>${calc.feesTotal.toFixed(2)}</b></div>
                <div><span className="muted">Tax:</span> <b>${calc.tax.toFixed(2)}</b></div>
                <div><span className="muted">Total:</span> <b>${calc.total.toFixed(2)}</b></div>
              </div>
            </div>

            {calc.assemblies.some(a=>a.notes) && (
              <div className="card" style={{marginTop:'12px'}}>
                <h4>Notes</h4>
                {calc.assemblies.map(a=> a.notes ? (<p key={a.id}><b>{a.label||a.areaName}:</b> <span className="muted">{a.notes}</span></p>) : null)}
              </div>
            )}

            <div className="card" style={{marginTop:'12px'}}>
              <div className="grid">
                <div className="span-6">
                  <h4>Customer Signature</h4>
                  <div style={{height:'60px', borderBottom:'1px solid #d4d9e4'}}></div>
                  <div className="muted xsmall">Print Name / Date</div>
                </div>
                <div className="span-6">
                  <h4>Contractor Signature</h4>
                  <div style={{height:'60px', borderBottom:'1px solid #d4d9e4'}}></div>
                  <div className="muted xsmall">Print Name / Date</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      )
    }

    function AdminSettings({calc}){
      const s = calc.settings
      const Txt=(label,key)=>(<div className="field"><label>{label}</label><input type="text" value={s[key]} onChange={e=>calc.setSettings({...s,[key]: e.target.value})}/></div>)
      const Num=(label,key)=>(<div className="field"><label>{label}</label><input type="number" step="0.01" value={s[key]} onChange={e=>calc.setSettings({...s,[key]: Number(e.target.value)})}/></div>)

      function onLogoFile(e){
        const file = e.target.files && e.target.files[0]
        if(!file) return
        const reader = new FileReader()
        reader.onload = (ev)=> calc.setSettings({...s, logoDataUrl: ev.target.result})
        reader.readAsDataURL(file)
      }

      function addZone(){ 
        const zones=[...s.travelZones, {id:'tz'+Math.random().toString(36).slice(2,5), name:'New Zone', amount:0}]
        calc.setSettings({...s, travelZones: zones})
      }
      function updateZone(id,key,val){
        const zones = s.travelZones.map(z=> z.id===id? {...z, [key]: (key==='amount'? Number(val) : val)} : z )
        calc.setSettings({...s, travelZones: zones})
      }
      function removeZone(id){
        const zones = s.travelZones.filter(z=>z.id!==id)
        calc.setSettings({...s, travelZones: zones})
      }

      return (
        <div className="card">
          <h3>Admin Settings</h3>
          <div className="grid">
            {Txt('Company Name','companyName')}
            {Txt('Phone','companyPhone')}
            {Txt('Email','companyEmail')}
            {Txt('Address','companyAddress')}
            <div className="field span-6"><label>Logo (upload)</label><input type="file" accept="image/*" onChange={onLogoFile}/></div>
            <div className="field span-6"><label>Logo URL (optional)</label><input type="text" placeholder="https://..." value={s.logoDataUrl} onChange={e=>calc.setSettings({...s, logoDataUrl:e.target.value})}/></div>

            {Num('OC Yield (bf/set)','OC_Yield_BF_per_Set')}
            {Num('CC Yield (bf/set)','CC_Yield_BF_per_Set')}
            {Num('OC Cost ($/set)','OC_Cost_per_Set')}
            {Num('CC Cost ($/set)','CC_Cost_per_Set')}
            {Num('Labor Rate ($/hr)','laborRatePerHour')}
            {Num('OC Productivity (bf/hr)','Productivity_BF_per_Hr_OC')}
            {Num('CC Productivity (bf/hr)','Productivity_BF_per_Hr_CC')}
            {Num('Waste % (0-1)','wastePctDefault')}

            <div className="field"><label>Overhead Mode</label>
              <select value={s.overheadMode} onChange={e=>calc.setSettings({...s,overheadMode:e.target.value})}>
                <option>Percent</option><option>Buckets</option>
              </select>
            </div>
            {Num('Overhead % (0-1)','overheadPct')}

            <div className="field"><label>Pricing Mode</label>
              <select value={s.pricingMode} onChange={e=>calc.setSettings({...s,pricingMode:e.target.value})}>
                <option>Margin</option><option>Markup</option>
              </select>
            </div>
            {Num('Target Gross Margin (0-1)','targetGrossMarginPct')}
            {Num('Markup % (0-1)','markupPct')}
            {Num('Rounding (sets step)','roundingSets')}
            {Num('Min Charge ($)','minChargeGlobal')}
            {Num('R/in (OC)','R_per_in_OC')}
            {Num('R/in (CC)','R_per_in_CC')}

            <div className="field span-4">
              <label>Show Profit in Wizard</label>
              <select value={s.showProfit?'yes':'no'} onChange={e=>calc.setSettings({...s, showProfit: e.target.value==='yes'})}>
                <option value="yes">Yes</option><option value="no">No</option>
              </select>
            </div>

            <div className="field span-4">
              <label>Tax Applies To</label>
              <select value={s.taxMaterialsOnly?'materials':'total'} onChange={e=>calc.setSettings({...s, taxMaterialsOnly: e.target.value==='materials'})}>
                <option value="total">Total Job</option>
                <option value="materials">Materials Only</option>
              </select>
            </div>

            <div className="span-12 card" style={{marginTop:'8px'}}>
              <h4 style={{marginTop:0}}>Travel Zones</h4>
              <table>
                <thead><tr><th>Name</th><th>Amount ($)</th><th></th></tr></thead>
                <tbody>
                  {s.travelZones.map(z=>(
                    <tr key={z.id}>
                      <td><input value={z.name} onChange={e=>updateZone(z.id,'name',e.target.value)}/></td>
                      <td><input type="number" value={z.amount} onChange={e=>updateZone(z.id,'amount',e.target.value)}/></td>
                      <td className="row-actions"><button className="btn danger" onClick={()=>removeZone(z.id)}>Remove</button></td>
                    </tr>
                  ))}
                </tbody>
              </table>
              <div className="tar" style={{marginTop:'8px'}}><button className="btn" onClick={addZone}>Add Zone</button></div>
            </div>

            <div className="span-12 card" style={{marginTop:'8px'}}>
              <h4 style={{marginTop:0}}>Scope of Work (PDF)</h4>
              <textarea value={s.scopeOfWork} onChange={e=>calc.setSettings({...s, scopeOfWork:e.target.value})} placeholder="Describe your standard scope, prep, cleanup, exclusions, warranty, etc."/>
              <p className="muted xsmall">Shown at the top of the Estimate PDF.</p>
            </div>
          </div>
        </div>
      )
    }

    ReactDOM.createRoot(document.getElementById('app')).render(<App/>)
  </script>
</body>
</html>
